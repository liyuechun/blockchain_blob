---
layout: post
title: "ç¬¬ä¸€ç«  Solidityæºæ–‡ä»¶çš„ç»“æ„"
date: 2017-08-29 
description: "Solidityå¼€å‘ï¼ŒSolidityæ–‡ä»¶å¯¼å…¥ï¼ŒSolidityæ³¨é‡Š"
tag: Solidity
keywords: "Solidityå¼€å‘ï¼ŒSolidityæ–‡ä»¶å¯¼å…¥ï¼ŒSolidityæ³¨é‡Š"
---   

æºæ–‡ä»¶å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„æ™ºèƒ½åˆçº¦çš„å®šä¹‰ä»¥åŠä»»æ„æ•°é‡çš„includeæŒ‡ä»¤å’Œpragmaä¼ªæŒ‡ä»¤ã€‚

## ç‰ˆæœ¬å£°æ˜

ç‰ˆæœ¬å£°æ˜ä»£ç æ ¼å¼å¦‚ä¸‹ï¼š


```js
pragma solidity ^0.4.0;
```

è¿™æ®µä»£ç çš„å£°æ˜è¡¨ç¤ºï¼Œæºæ–‡ä»¶ä¸ä¼šè¢«`0.4.0`ä»¥ä¸‹ç‰ˆæœ¬çš„ç¼–è¯‘å™¨ç¼–è¯‘ã€‚å½“ç„¶åŒæ—¶ä¹Ÿä¸ä¼šè¢«`0.5.0`ä»¥ä¸Šç‰ˆæœ¬çš„ç¼–è¯‘å™¨èµ·ä½œç”¨ï¼ˆè¿™æ˜¯ç”±``^``ç¬¦å·æ¥å†³å®šçš„ï¼‰ã€‚

`0.4.0` ~ `0.4.9` è¿™äº›ç‰ˆæœ¬æ”¯æŒä¸Šé¢ä»£ç å£°æ˜çš„æºç ç¼–è¯‘ï¼Œè¿™æ ·å¤„ç†çš„å¥½å¤„æ˜¯ï¼Œå¦‚æœ`0.4.0`ç¼–è¯‘å™¨æœ‰é—®é¢˜ï¼Œå¯ä»¥éšæ—¶ä¿®å¤`bug`ï¼Œå°†å…¶è°ƒæ•´ä¸º`0.4.1`ã€‚


## å¯¼å…¥å…¶ä»–æºæ–‡ä»¶

### è¯­æ³•å’Œè¯­ä¹‰


å°½ç®¡`Solidity`ä¸­æ²¡æœ‰``é»˜è®¤å¯¼å‡º``çš„æ¦‚å¿µï¼Œä½†æ˜¯`Solidity`æ”¯æŒ`ES6`ä¸­å¯ç”¨çš„å¯¼å…¥å£°æ˜ã€‚

##### å…¨å±€å¼•å…¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å½¢å¼çš„å¯¼å…¥è¯­å¥ï¼š

```js
import "filename";
```

è¿™ä¸ªå£°æ˜å¯ä»¥å°†`filename`æ–‡ä»¶ä¸­å¯å¯¼å‡ºçš„æ‰€æœ‰çš„å…¨å±€å˜é‡å¯¼å…¥åˆ°å½“å‰æ–‡ä»¶çš„å…¨å±€ä½œç”¨åŸŸä¸­ã€‚

##### è‡ªå®šä¹‰å¯¼å…¥å˜é‡å

```js
import * as symbolName from "filename";
```

åˆ›å»ºä¸€ä¸ªå…¨å±€çš„å˜é‡å`symbolName`ï¼Œ`symbolName`é‡Œé¢åŒ…å«`filename`è¿™ä¸ªæ–‡ä»¶ä¸­æ‰€æœ‰çš„å…¨å±€å˜é‡ã€‚

##### è‡ªå®šä¹‰åˆ«å

```js
import {symbol1 as alias, symbol2} from "filename";
```

`alias`ç­‰ä»·äº`filename`æ–‡ä»¶ä¸­çš„`symbol1`ï¼Œ`symbol2`ç­‰ä»·äº`filename`æ–‡ä»¶ä¸­çš„`symbol2`ã€‚

##### å¦å¤–ä¸€ç§é`ES6`çš„å¯¼å…¥æ–¹å¼

```js
import "filename" as symbolName;
```

è¿™ç§å†™æ³•ä¸æ˜¯`ES6`é‡Œé¢çš„å†™æ³•ï¼Œä½†æ˜¯ä½¿ç”¨éå¸¸æ–¹ä¾¿ï¼Œå®ƒç­‰ä»·äº`import * as symbolName from "filename";`ã€‚


### è·¯å¾„ï¼ˆPathsï¼‰


åœ¨ä¸Šé¢çš„`filename`ä¸­ï¼Œå§‹ç»ˆç”¨`/`ç¬¦å·æ¥è¿›è¡Œè·¯å¾„åˆ†ç¦»ï¼Œ``.``ä»£è¡¨å½“å‰è·¯å¾„ï¼Œ``..``ä»£è¡¨ä¸Šä¸€çº§è·¯å¾„ã€‚å½“``.``å’Œ``..``åé¢æ²¡æœ‰è·Ÿéš``/``ç¬¦å·æ—¶ï¼Œå®ƒä¸èƒ½è¡¨ç¤ºå½“å‰è·¯å¾„å’Œä¸Šä¸€çº§è·¯å¾„ã€‚è¿˜æœ‰ï¼Œå¦‚æœæ²¡æœ‰``.``æˆ–è€…``..``æ—¶ï¼Œæ‰€æœ‰çš„è·¯å¾„éƒ½é»˜è®¤ç»å¯¹è·¯å¾„è€Œä¸æ˜¯ç›¸å¯¹è·¯å¾„ã€‚

ä»å½“å‰è·¯å¾„å¯¼å…¥ä¸€ä¸ª``x``æ–‡ä»¶ï¼Œä½¿ç”¨`import "./x" as x`;å¦‚æœä½ ä½¿ç”¨`import "x" as x`ä»£æ›¿ä¸Šé¢çš„ä»£ç ï¼Œå®ƒå°†ä¸èƒ½æ­£ç¡®å¼•ç”¨åˆ°`x`æ–‡ä»¶ã€‚

### åœ¨å®é™…ç¼–è¯‘å™¨ä¸­ä½¿ç”¨


å½“ç¼–è¯‘å™¨è¢«è°ƒç”¨ï¼Œå®ƒä¸ä»…å¯ä»¥æŒ‡å®šå¦‚ä½•å‘ç°è·¯å¾„çš„èµ·å§‹å…ƒç´ ï¼Œè¿˜å¯ä»¥æŒ‡å®šè·¯å¾„å‰ç¼€æ˜ å°„ï¼Œä¾‹å¦‚ï¼šå°†``github.com/ethereum/dapp-bin/library``æ˜ å°„åˆ°``/usr/local/dapp-bin/library``ï¼Œç¼–è¯‘å™¨å°†ä»è¢«æ˜ å°„åˆ°çš„æ–°è·¯å¾„ä¸­è¯»å–æ–‡ä»¶ã€‚å¦‚æœåŒä¸€ä¸ªè·¯å¾„å­˜åœ¨å¤šä¸ªè¢«æ˜ å°„çš„è·¯å¾„ï¼Œ`key`æœ€é•¿çš„æ˜ å°„è·¯å¾„å…ˆè¢«å°è¯•åº”ç”¨ã€‚è¿˜å…è®¸å›æ»šé‡æ–°æ˜ å°„ï¼Œä¾‹å¦‚ï¼š``""``æ˜ å°„åˆ°``/usr/local/include/solidity``ã€‚é™¤æ­¤ä»¥å¤–ï¼Œè¿™äº›æ˜ å°„è¿˜ä¾èµ–äºå¯¼å…¥çš„ä¸åŒç‰ˆæœ¬åŒåçš„ä¾èµ–åŒ…ã€‚

##### solc:

å¯¹äº`solc`å‘½ä»¤è¡Œç¼–è¯‘å·¥å…·ï¼Œè¿™äº›æ˜ å°„è¿˜æä¾›äº†``context:prefix=target``å‚æ•°ï¼Œå…¶ä¸­``context:``å’Œ``=target``æ˜¯å¯é€‰çš„ï¼Œåœ¨``context:prefix=target``å‚æ•°ä¸­ï¼Œ``target``é»˜è®¤ä¸ºå½“å‰æ¡ˆä¾‹ä¸­çš„å‰ç¼€ã€‚æ‰€æœ‰é‡æ–°æ˜ å°„çš„é‚£äº›æœ‰è§„å¾‹çš„æ–‡ä»¶çš„å€¼éƒ½ä¼šåŒ…æ¶µä»–ä»¬çš„ä¾èµ–é¡¹ä¸€èµ·è¢«ç¼–è¯‘ã€‚åªè¦æ–‡ä»¶åä¸­ä¸åŒ…å«``=``æˆ–è€…``:``ï¼Œè¿™ä¸ªæœºåˆ¶å°±å®Œå…¨å‘åå…¼å®¹å¹¶ä¸”ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚å¦‚æœä¸€ä¸ªå¯¼å…¥çš„æ–‡ä»¶è¢«é‡æ–°æ˜ å°„ï¼Œé‚£ä¹ˆåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå®ƒçš„å‰ç¼€å°†ä¼šè¢«æ›¿æ¢å‚æ•°ä¸­çš„``target``çš„å€¼ã€‚

ä¸¾ä¸ªğŸŒ°ï¼Œå¦‚æœä½ æƒ³å°†``github.com/ethereum/dapp-bin/``å…‹éš†åˆ°æœ¬åœ°çš„``/usr/local/dapp-bin``è¿™ä¸ªè·¯å¾„ä¸­ï¼Œä½ å¯ä»¥åœ¨ä½ çš„æºæ–‡ä»¶ä¸­ä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼š

```js
import "github.com/ethereum/dapp-bin/library/iterable_mapping.sol" as it_mapping;
```

å¹¶ä¸”è¿è¡Œä¸‹é¢çš„ä»£ç ã€‚

```js
solc github.com/ethereum/dapp-bin/=/usr/local/dapp-bin/ source.sol
```

ä½œä¸ºä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼Œæ”¯æŒä½ ä¾èµ–äºæ›´è€ç‰ˆæœ¬çš„``dapp-bin``ã€‚ä½ å¯ä»¥åœ¨``/usr/local/dapp-bin_old,``ä¸­æ£€æµ‹å‡º``dapp-bin``çš„æ¯”è¾ƒè€çš„ç‰ˆæœ¬ã€‚ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š

```js
solc module1:github.com/ethereum/dapp-bin/=/usr/local/dapp-bin/ \
module2:github.com/ethereum/dapp-bin/=/usr/local/dapp-bin_old/ \
source.sol
```

``module2``æŒ‡å‘æ‰€æœ‰çš„æ—§ç‰ˆæœ¬ï¼Œ``module1``æŒ‡å‘æ‰€æœ‰çš„æ–°ç‰ˆæœ¬ã€‚


**æ³¨æ„ï¼š** `solc`åªå…è®¸ä½ ä»æŸä¸€ç›®å½•ä¸­åŒ…å«æ–‡ä»¶ï¼šå®ƒä»¬å¿…é¡»æ˜¯å…·ä½“æŒ‡å®šçš„æºæ–‡ä»¶ä¸­çš„ä¸€ä¸ªæ–‡ä»¶çš„ç›®å½•æˆ–è€…å­ç›®å½•ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªé‡æ–°æ˜ å°„ç›®æ ‡çš„ç›®å½•æˆ–è€…å­ç›®å½•ã€‚å¦‚æœä½ å¸Œæœ›å…è®¸åŒ…å«ç»å¯¹è·¯å¾„ï¼Œè‡ªéœ€è¦æ·»åŠ é‡æ˜ å°„``=/``ã€‚


å¦‚æœå­˜åœ¨å¤šä¸ªæœ‰æ•ˆæ–‡ä»¶çš„é‡æ˜ å°„ï¼Œé‚£ä¹ˆå‰ç¼€æœ€é•¿çš„ä¸€ä¸ªé‡æ˜ å°„å°†è¢«åº”ç”¨ã€‚

##### Remix:

Remix provides an automatic remapping for github and will also automatically retrieve the file over the network: You can import the iterable mapping by e.g. 

`Remix`ä¸ºgithubæä¾›è‡ªåŠ¨é‡æ˜ å°„å¹¶ä¸”è‡ªåŠ¨é€šè¿‡ç½‘ç»œè‡ªåŠ¨å–å›æ–‡ä»¶ï¼šä½ å¯ä»¥å¦‚ä¸‹æ‰€ç¤ºä½¿ç”¨ã€‚

```js
import "github.com/ethereum/dapp-bin/library/iterable_mapping.sol" as it_mapping;.
```

## æ³¨é‡Š


##### å•è¡Œæ³¨é‡Š

```js
// This is a single-line comment.
```

##### å¤šè¡Œæ³¨é‡Š

```js
/*
This is a
multi-line comment.
*/
```

##### natspecæ³¨é‡Š
```js
pragma solidity ^0.4.0;

/** @title Shape calculator. */
contract shapeCalculator {
    /** @dev Calculates a rectangle's surface and perimeter.
      * @param w Width of the rectangle.
      * @param h Height of the rectangle.
      * @return s The calculated surface.
      * @return p The calculated perimeter.
      */
    function rectangle(uint w, uint h) returns (uint s, uint p) {
        s = w * h;
        p = 2 * (w + h);
    }
}
```


## æ˜¥å“¥ç®€ä»‹


**ç®€ä»‹ï¼š** èµ„æ·±è®²å¸ˆï¼Œå…¨æ ˆå·¥ç¨‹å¸ˆï¼›åŒºå—é“¾ã€é«˜å¯ç”¨æ¶æ„æŠ€æœ¯çˆ±å¥½è€…ã€‚
**ä¸ªäººåšå®¢ï¼š**[http://liyuechun.org](http://liyuechun.org)
**æ–°æµªå¾®åšï¼š**[é»è·ƒæ˜¥-è¿½æ—¶é—´çš„äºº](http://weibo.com/mobiledevelopment)
**githubï¼š**[http://github.com/liyuechun](http://github.com/liyuechun)


## æŠ€æœ¯äº¤æµ

- åŒºå—é“¾æŠ€æœ¯äº¤æµQQç¾¤ï¼š348924182

- æ·»åŠ `liyc1215`å¾®ä¿¡ï¼Œç§èŠæ‹‰ä½ è¿›å¾®ä¿¡ç¾¤




